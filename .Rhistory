# Read in and clean data
dat <- process_quarterly("Data/Quarterly Spending/SRE-QTR-2013.xlsx", sheet = "Q12013") |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2013.xlsx", sheet = "Q22013")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2013.xlsx", sheet = "Q32013")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2013.xlsx", sheet = "Q42013")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2014.xlsx", sheet = "Q12014")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2014.xlsx", sheet = "Q22014")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2014.xlsx", sheet = "Q32014")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2014.xlsx", sheet = "Q42014")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2015.xlsx", sheet = "Q12015")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2015.xlsx", sheet = "Q22015")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2015.xlsx", sheet = "Q32015")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2015.xlsx", sheet = "Q42015")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2009.xlsx", sheet = "Q12009")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2009.xlsx", sheet = "Q22009")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2009.xlsx", sheet = "Q32009")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2009.xlsx", sheet = "Q42009")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2010.xlsx", sheet = "Q12010")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2010.xlsx", sheet = "Q22010")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2010.xlsx", sheet = "Q32010")) |>
rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2010.xlsx", sheet = "Q42010"))
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2011.xlsx", sheet = "Q12011")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2011.xlsx", sheet = "Q22011")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2011.xlsx", sheet = "Q32011")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2011.xlsx", sheet = "Q42011")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2012.xlsx", sheet = "Q12012")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2012.xlsx", sheet = "Q22012")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2012.xlsx", sheet = "Q32012")) |>
# rbind(process_quarterly("Data/Quarterly Spending/SRE-QTR-2012.xlsx", sheet = "Q42012"))
# Merge w covariates
dat <- read_csv("Data/KALAHI/PHL-KC Matching Data for Sample/matching data for sample.csv") |>
rename(region = reg_psgc, treat = treatment) |>
mutate(mun = gsub(" \\(.*$", "", iconv(mun, from = "", to = "UTF-8", sub = "byte"))) |>
mutate(mun = ifelse(grepl("Sofronio", mun), "Sofronio Espanola", mun)) |>
dplyr::select(-c(island, mun_psgc, pairnum)) |>
group_by(region, mun) |>
filter(n() == 1) |>
ungroup() |>
left_join(dat, by = c("region", "mun")) |>
filter(!is.na(treat)) |>
mutate(kalahi_spending_percap = kalahi_spending / pop07nso,
total_spending_percap = total_spending / pop07nso,
.before = general_fund)
# Merge in vote share data
dat <- election_returns |>
group_by(region, mun) |>
filter(n() == 1) |>
ungroup() |>
right_join(dat, by = c("region", "mun")) |>
mutate(eightieth_margin = ifelse(vote_diff > .8, 1, 0),
seventyfifth_margin = ifelse(vote_diff > .75, 1, 0),
seventieth_margin = ifelse(vote_diff > .7, 1, 0),
sixtyfifth_margin = ifelse(vote_diff > .65, 1, 0),
sixtieth_margin = ifelse(vote_diff > .6, 1, 0),
fiftyfifth_margin = ifelse(vote_diff > .55, 1, 0),
fiftieth_margin = ifelse(vote_diff > .5, 1, 0),
fortyfifth_margin = ifelse(vote_diff > .45, 1, 0),
fortieth_margin = ifelse(vote_diff < .40, 1, 0),
thirtyfifth_margin = ifelse(vote_diff < .35, 1, 0),
thirtieth_margin = ifelse(vote_diff < .30, 1, 0),
twentyfifth_margin = ifelse(vote_diff < .25, 1, 0),
twentieth_margin = ifelse(vote_diff < .2, 1, 0),
fifteenth_margin = ifelse(vote_diff < .15, 1, 0),
tenth_margin = ifelse(vote_diff < .1, 1, 0),
fifth_margin = ifelse(vote_diff < .05, 1, 0),
marginal_margin = ifelse(vote_diff < .025, 1, 0),
yolanda = ifelse(mun %in% yolanda &
(as.numeric(substr(quarter, 3, 6)) > 2013 |
quarter == "Q42013"), 1, 0),
.before = treat) |>
mutate(
post = ifelse(as.numeric(substr(quarter, 3, 6)) >= 2013, 1, 0),
post_treat = treat * post,
.before = treat)
# PH local gov interactive data set
localgov <- read_xlsx("Data/fiscal_data_revised_for upload.xlsx") |>
filter(lgutype == "Province" & year == 2010) |>
rename(province = lgu, voteshare = pi) |>
mutate(province = str_to_title(province)) |>
mutate(region = case_when(
region == "CALABARZON" ~ "IV-A",
region == "Bicol Region" ~ "V",
region == "CAR" ~ "CAR",
region == "MIMAROPA" ~ "IV-B",
region == "Zamboanga Peninsula" ~ "IX",
region == "Western Visayas" ~ "VI",
region == "Central Visayas" ~ "VII",
region == "Eastern Visayas" ~ "VIII",
region == "Northern Mindanao" ~ "X",
region == "Davao Region" ~ "XI",
region == "SOCCSKSARGEN" ~ "XII",
region == "CARAGA" ~ "XIII",
region == "BARMM" ~ "BARMM",
region == "Ilocos Region" ~ "I",
region == "Cagayan Valley" ~ "II",
region == "Central Luzon" ~ "III",
.default = "NCR"
)) |>
select(-year)
# Merge dat w provincial competition
t <- localgov |>
group_by(region, province) |>
filter(n() == 1) |>
ungroup() |>
right_join(dat, by = c("region", "province"))
# 2007 cesi data
creditclaim <- read_dta("Data/credit claiming/ajps_data.dta") |>
mutate(province = str_to_title(provincename), mun = str_to_title(municityname)) |>
select(-provincename, -municityname)
# Merge in historic budget data
process_yearly <- function(file_path) {
data <- read_excel(file_path)
# Clean column names
cleaned_column_names <- colnames(data) |>
str_to_lower() |>
str_replace_all(" ", "_") |>
str_replace_all("/", "_") |>
str_replace_all("[^a-z_]", "") |>
str_replace_all("_+", "_") |>
str_replace_all("social_security_social_services_welfare", "social_services_and_social_welfare")
# Set the new column names
cleaned_data <- setNames(data, cleaned_column_names) |>
filter(lgu_type == "Municipality") |>
select(-c(lgu_type)) |>
rename(mun = lgu_name)
cleaned_data <- cleaned_data |>
mutate(across(4:ncol(cleaned_data), as.numeric)) |>
mutate(year = str_match(file_path, "20[0-2][0-9]")[, 1],
.after = mun) |>
mutate(region = str_replace_all(str_replace_all(region, "Region ", ""), " Region", "")) |>
mutate(region = str_replace_all(region, "MIMAROPA", "IV-B")) |>
mutate(kalahi_spending = rowSums(across(c(education_culture_sports_manpower_development,
health_nutrition_population_control,
housing_and_community_development,
social_services_and_social_welfare)),
na.rm = TRUE),
total_spending = ifelse(as.numeric(year) < 2009,
total_expenditures,
rowSums(across(c(total, total_current_operating_expenditures,
total_nonoperating_expenditures)),
na.rm = TRUE)),
.after = year)
if(str_detect(file_path, "200[1-8]")) {
cleaned_data[, 5:ncol(cleaned_data)] <- cleaned_data[, 5:ncol(cleaned_data)] * 1e6
}
return(cleaned_data)
}
historic_dat <- process_yearly("Data/Yearly Spending/By-LGU-SRE-2004.xlsx") |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2005.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2006.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2007.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2008.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2009.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2010.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2011.xlsx"))
# Graph Kalahi spending over time by treat and control
historic_dat <-
read_csv("Data/KALAHI/PHL-KC Matching Data for Sample/matching data for sample.csv") |>
rename(region = reg_psgc, treat = treatment) |>
select(-c(island, mun_psgc, pairnum)) |>
mutate(yolanda = ifelse(mun %in% yolanda, 1, 0)) |>
group_by(region, mun) |>
filter(n() == 1) |>
ungroup() |>
full_join(historic_dat, by = c("region", "mun")) |>
filter(!is.na(treat) & !is.na(year))
# Evaluating hypothesis that IE was randomized via randomization inference
# Note: Code provided by Graeme Blair
suppressMessages({
library(DeclareDesign)
library(lmtest)
library(ri2)
library(nnet)
})
set.seed(252463)
balance_vars <- c("kalahi_spending",
"total_spending",
"pi",
"bgytot",
"pop07nso",
"land")
balance_df <- historic_dat %>%
filter(as.numeric(year) < 2012) |>
select(region, province, treat, all_of(balance_vars)) %>%
na.omit
declaration <-
with(balance_df,{
declare_ra(
blocks = region,
clusters = province,
conditions = 0:1
)
})
# Robust regression function
regression_fun <- function(data) {
lm_robust(as.formula(paste0("treat ~ as.factor(region) + ", paste0(balance_vars, collapse = "+"))), clusters =
province, data = data)
}
balance_fun <- function(data) {
data %>% regression_fun %>% glance %>% pull(statistic)
}
ri2_out <-
conduct_ri(
test_function = balance_fun,
declaration = declaration,
assignment = "treat",
sharp_hypothesis = 0,
sims = 100,
data = balance_df)
ri2_summ <- summary(ri2_out) %>% rename_with(~paste0(., "_F_ri"))
balance_results <- balance_df %>%
regression_fun() %>%
tidy %>%
filter(term %in% balance_vars) %>%
bind_cols(ri2_summ)
# Present results
historic_treat <- historic_dat |> filter(treat == 1)
historic_cont <- historic_dat |> filter(treat == 0)
data.frame(
var = c("kalahi spending", "total spending", "poverty index", "num barangay", "population",
"land area"),
mean_treat = c(mean(historic_treat$kalahi_spending / historic_treat$pop07nso),
mean(historic_treat$total_spending / historic_treat$pop07nso),
mean(historic_treat$pi), mean(historic_treat$bgytot),
mean(historic_treat$pop07nso), mean(historic_treat$land)),
mean_cont = c(mean(historic_cont$kalahi_spending / historic_cont$pop07nso),
mean(historic_cont$total_spending / historic_cont$pop07nso),
mean(historic_cont$pi), mean(historic_cont$bgytot),
mean(historic_cont$pop07nso), mean(historic_cont$land)),
sd_treat = c(sd(historic_treat$kalahi_spending / historic_treat$pop07nso),
sd(historic_treat$total_spending / historic_treat$pop07nso),
sd(historic_treat$pi), sd(historic_treat$bgytot),
sd(historic_treat$pop07nso), sd(historic_treat$land)),
sd_cont = c(sd(historic_cont$kalahi_spending / historic_cont$pop07nso),
sd(historic_cont$total_spending / historic_cont$pop07nso),
sd(historic_cont$pi), sd(historic_cont$bgytot),
sd(historic_cont$pop07nso), sd(historic_cont$land)),
p = c(balance_results[1,5], balance_results[2,5], balance_results[3,5],
balance_results[4,5], balance_results[5,5], balance_results[6,5])
) |>
kable(format = "latex", booktabs = TRUE, digits = 4,
caption = "Pretreatment covariate balance") |>
kable_styling(font_size = 8)
# Get list of budget categories for subsequent random forest analysis
budget_items <- process_quarterly("Data/Quarterly Spending/SRE-QTR-2013.xlsx", sheet = "Q32013") |>
select(-c(province, region, mun, quarter, year, kalahi_spending, total_spending)) |>
colnames()
historic_dat <- process_yearly("Data/Yearly Spending/By-LGU-SRE-2007.xlsx") |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2008.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2009.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2010.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2011.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2012.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2013.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2014.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2015.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2016.xlsx")) |>
bind_rows(process_yearly("Data/Yearly Spending/By-LGU-SRE-2017.xlsx"))
historic_dat <-
read_csv("Data/KALAHI/PHL-KC Matching Data for Sample/matching data for sample.csv") |>
rename(region = reg_psgc, treat = treatment) |>
select(-c(island, mun_psgc, pairnum)) |>
mutate(yolanda = ifelse(mun %in% yolanda, 1, 0)) |>
group_by(region, mun) |>
filter(n() == 1) |>
ungroup() |>
full_join(historic_dat, by = c("region", "mun")) |>
filter(!is.na(treat) & !is.na(year))
historic_dat |>
mutate(
treat = ifelse(treat == 1, "treat", "control"),
year_num = as.numeric(year),
spending = log(total_spending)
) |>
ggplot(aes(x = year_num, y = I(total_spending / pop07nso), color = treat, fill = treat)) +
# Mean trend lines
stat_summary(
fun = mean,
geom = "line",
size = 1.2
) +
# Vertical line at impact start
geom_vline(
xintercept = 2011,
linetype = "dashed",
color = "gray40",
size = 0.8
) +
# Annotation for vertical line
annotate(
"text", x = 2011, y = 4000, label = "Intervention begins",
vjust = -0.5, angle = 90, size = 2.5, color = "gray40"
) +
scale_x_continuous(breaks = scales::pretty_breaks(n = 10)) +
labs(
x = "Year",
y = "Per capita spending",
title = "Figure 1: Yearly spending for treated vs control municipalities",
color = NULL,
fill = NULL
) +
theme_minimal() +
theme(legend.position = "bottom", panel.grid.minor.x = element_blank())
library(sf)
# Read shape file of municipalities
sf <- st_read("Data/Municities/MuniCities.shp") |>
rename(mun = NAME_2) |>
group_by(mun) |>
filter(n() == 1) |>
ungroup()
# Merge w budget data
dat_sf <- dat |> left_join(sf) |> st_as_sf()
adj_matrix <- st_touches(dat_sf, dat_sf)
bordering_control <- sapply(adj_matrix, function(neighbors) {
any(dat_sf$treat[neighbors] == 1)  # Check if any neighboring municipality is treatment
})
dat_sf <- dat_sf |>
mutate(border_treat = ifelse(treat == 0 & bordering_control, 1, 0), .before = pi)
# Re-run analysis accounting for spillovers
kalahi_elec_spill <- lm_robust(I(kalahi_spending / pop07nso) ~ treat + border_treat + vote_diff +
I(treat * vote_diff) + yolanda + I(pop07nso / 1000) +
as.factor(mun) + as.factor(quarter) + pi, dat_sf)
total_elec_spill <- lm_robust(I(total_spending / pop07nso) ~ treat + border_treat + vote_diff +
I(treat * vote_diff) + yolanda + I(pop07nso / 1000) + as.factor(mun)
+ as.factor(quarter) + pi, dat_sf)
modelsummary(list("Public services" = kalahi_elec_spill,
"Total" = total_elec_spill),
stars = T,
title = "Effect of Kalahi on public spending with spillovers",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
# Read shape file of municipalities
sf <- st_read("Data/Municities/MuniCities.shp") |>
rename(mun = NAME_2) |>
group_by(mun) |>
filter(n() == 1) |>
ungroup()
# Merge w budget data
dat_sf <- dat |> left_join(sf) |> st_as_sf()
adj_matrix <- st_touches(dat_sf, dat_sf)
bordering_control <- sapply(adj_matrix, function(neighbors) {
any(dat_sf$treat[neighbors] == 1)  # Check if any neighboring municipality is treatment
})
View(dat_sf)
library(sf)
# Read shape file of municipalities
sf <- st_read("Data/Municities/MuniCities.shp") |>
rename(mun = NAME_2) |>
group_by(mun) |>
filter(n() == 1) |>
ungroup()
# Merge w budget data
dat_sf <- dat |> left_join(sf) |> st_as_sf()
adj_matrix <- st_touches(dat_sf, dat_sf)
bordering_control <- sapply(adj_matrix, function(neighbors) {
any(dat_sf$treat[neighbors] == 1)  # Check if any neighboring municipality is treatment
})
dat_sf <- dat_sf |>
mutate(border_treat = ifelse(treat == 0 & bordering_control, 1, 0), .before = pi)
# Re-run analysis accounting for spillovers
kalahi_elec_spill <- lm_robust(I(kalahi_spending / pop07nso) ~ treat + border_treat + vote_diff +
I(treat * vote_diff) + yolanda + I(pop07nso / 1000) +
as.factor(mun) + as.factor(quarter) + pi, dat_sf)
total_elec_spill <- lm_robust(I(total_spending / pop07nso) ~ treat + border_treat + vote_diff +
I(treat * vote_diff) + yolanda + I(pop07nso / 1000) + as.factor(mun)
+ as.factor(quarter) + pi, dat_sf)
modelsummary(list("Public services" = kalahi_elec_spill,
"Total" = total_elec_spill),
stars = T,
title = "Effect of Kalahi on public spending with spillovers",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
# Read in WB proj data, identify those w/o disbursements, and merge w locations
loc <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/locations.csv")
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`) |>
filter(COUNTRY == "Philippines") |>
#filter(`DISBURSED AMOUNT 1` == 0) |>
left_join(loc, by = c("project_id")) |>
filter(!is.na(latitude) & !is.na(longitude)) |>
filter(grepl("Regional Infrastructure for Growth", `PROJECT NAME`))
#mutate(approv_date = as.numeric(str_match(`APPROVAL DATE`, "([1-2][0-9][0-9][0-9])")[,2])) |>
#filter(approv_date > 2011)
# Convert to sf object with point geometry
wb <- st_as_sf(
wb,
coords = c("longitude", "latitude"),
crs = 4326  # WGS84 coordinate system
)
# Merge w budget shape file & create binary indicator for receiving a project
dat_wb <- st_join(dat_sf, wb, left = TRUE) |>
mutate(wb_proj = ifelse(!is.na(project_id), 1, 0))
# Run regression
wb_proj_total <- lm_robust(I(total_spending / pop07nso) ~ wb_proj
+ I(pop07nso / 1000) + pi + land + bgytot +
as.factor(mun) + as.factor(quarter), dat_wb)
modelsummary(list("Total" = wb_proj_total),
stars = T,
title = "Effect of Kalahi on unrelated budget categories",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
summary(lm_robust(kalahi_spending_percap ~ treat + non_complier + yolanda + I(pop07nso / 1000) + land + pi + bgytot +
as.factor(mun) + as.factor(quarter), t))
summary(lm_robust(kalahi_spending_percap ~ treat + yolanda + I(pop07nso / 1000) + land + pi + bgytot +
as.factor(mun) + as.factor(quarter), t))
modelsummary(list("Total" = wb_proj_total),
stars = T,
title = "Effect of Kalahi on unrelated budget categories",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
wb_proj_total <- lm_robust(I(total_spending / pop07nso) ~ wb_proj
+ I(pop07nso / 1000) + pi + land + bgytot +
as.factor(quarter), dat_wb)
modelsummary(list("Total" = wb_proj_total),
stars = T,
title = "Effect of Kalahi on unrelated budget categories",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
wb_proj_total <- lm_robust(I(total_spending / pop07nso) ~ wb_proj
+ I(pop07nso / 1000) + pi + land + bgytot, dat_wb)
modelsummary(list("Total" = wb_proj_total),
stars = T,
title = "Effect of Kalahi on unrelated budget categories",
output = "kableExtra"
) |> kable_classic(latex_options = "scale_down") |>
kable_styling(full_width = FALSE, position = "center") |>
footnote(general = "Spending measured per capita in Philippine pesos. Population covariate
scaled per 1,000 people such that significant digits are visible in the parameter estimate.
Models include region and quarter-level fixed effects.", threeparttable = TRUE,
escape = FALSE, footnote_as_chunk = TRUE)
View(dat_wb)
dat_wb |> filter(wb_proj == 1)
dat_wb |> filter(wb_proj == 1)
dat_wb |> filter(wb_proj == 0)
View(wb)
View(loc)
read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`) |>
filter(COUNTRY == "Philippines")
read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`)
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`)
View(wb)
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`) |>
#filter(COUNTRY == "Philippines") |>
#filter(`DISBURSED AMOUNT 1` == 0) |>
left_join(loc, by = c("project_id")) |>
#filter(!is.na(latitude) & !is.na(longitude)) |>
filter(grepl("Regional Infrastructure for Growth", `PROJECT NAME`))
#mutate(approv_date = as.numeric(str_match(`APPROVAL DATE`, "([1-2][0-9][0-9][0-9])")[,2])) |>
#filter(approv_date > 2011)
# Convert to sf object with point geometry
wb <- st_as_sf(
wb,
coords = c("longitude", "latitude"),
crs = 4326  # WGS84 coordinate system
)
View(wb)
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`) |>
filter(COUNTRY == "Philippines")
View(wb)
usaid <- read_excel("Data/USAID_webscraped_data_export_10-2011.xlsx")
View(usaid)
usaid <- read_excel("Data/USAID_webscraped_data_export_10-2011.xlsx", sheet = "Data")
View(usaid)
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects.csv")
View(wb)
loc <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/locations.csv")
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects.csv") |>
left_join(loc, by = c("project_id"))
ancillary <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv")
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects.csv") |>
left_join(loc, by = c("project_id")) |>
left_join(ancillary, by = c("project_id"))
ancillary <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects_ancillary.csv") |>
rename(project_id = `PROJECT ID`)
wb <- read_csv("Data/WorldBank_GeocodedResearchRelease_Level1_v1.4.2/data/projects.csv") |>
left_join(loc, by = c("project_id")) |>
left_join(ancillary, by = c("project_id"))
wb |> filter(total_disbursements == 0)
wb |> filter(total_disbursements < 100)
wb |> filter(is.na(total_disbursements))
wb |> filter(country == "Philippines")
wb |> filter(COUNTRY == "Philippines")
